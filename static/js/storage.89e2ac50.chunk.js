(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{11:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(5),o=n(1),a=n.n(o),s=n(2),c=n(13),u=n.n(c),i=function(){return new Promise(function(e,t){var n=!1,r=document.createElement("iframe");window.addEventListener("message",function(t){var o=t.data;"storage"!==o.method||n||(n=!0,e(o.files),r.contentWindow.postMessage({method:"clear"},"*"))}),r.addEventListener("load",function(){r.contentWindow.postMessage({method:"transfer"},"*")}),r.addEventListener("error",function(){n||(n=!0,e(null))}),r.src="https://diablo.rivsoft.net/storage.html",r.style.display="none",document.body.appendChild(r),setTimeout(function(){n||(n=!0,e(null))},1e4)})};function d(e,t){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(a.a.mark(function e(t,n){var r,o,s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(n.toLowerCase());case 2:(r=e.sent)?(o=new Blob([r],{type:"binary/octet-stream"}),s=URL.createObjectURL(o),(c=document.createElement("a")).setAttribute("href",s),c.setAttribute("download",n),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(s)):console.error("File ".concat(n," does not exist"));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(a.a.mark(function e(t){var n,r,o,s,c,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,r=!1,o=void 0,e.prev=3,e.next=6,t.keys();case 6:e.t0=Symbol.iterator,s=e.sent[e.t0]();case 8:if(n=(c=s.next()).done){e.next=14;break}(u=c.value).match(/\.sv$/i)&&d(t,u);case 11:n=!0,e.next=8;break;case 14:e.next=20;break;case 16:e.prev=16,e.t1=e.catch(3),r=!0,o=e.t1;case 20:e.prev=20,e.prev=21,n||null==s.return||s.return();case 23:if(e.prev=23,!r){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,null,[[3,16,20,28],[21,,23,27]])}))).apply(this,arguments)}var v=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n(r.error)},r.onabort=function(){return n()},r.readAsArrayBuffer(e)})};function w(e,t,n){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(a.a.mark(function e(t,n,r){var o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,v(r);case 3:return e.t1=e.sent,o=new e.t0(e.t1),n.set(r.name.toLowerCase(),o),e.abrupt("return",t.set(r.name.toLowerCase(),o));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(a.a.mark(function e(t){var n,o,s,c,l,p,v,h,b,m,x,y,k,j,L,g,O,P;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new u.a("diablo_fs"),o=new Map,s=0,e.t0=Object,e.next=7,n.json();case 7:e.t1=e.sent,c=e.t0.entries.call(e.t0,e.t1);case 9:if(!(s<c.length)){e.next=18;break}l=c[s],p=Object(r.a)(l,2),v=p[0],h=p[1],o.set(v,h);case 15:s++,e.next=9;break;case 18:if(!t){e.next=42;break}return e.next=21,i();case 21:if(!(b=e.sent)){e.next=42;break}for(m=!0,x=!1,y=void 0,e.prev=26,k=b[Symbol.iterator]();!(m=(j=k.next()).done);m=!0)L=j.value,g=Object(r.a)(L,2),O=g[0],P=g[1],b.set(O,P),n.set(O,P);e.next=34;break;case 30:e.prev=30,e.t2=e.catch(26),x=!0,y=e.t2;case 34:e.prev=34,e.prev=35,m||null==k.return||k.return();case 37:if(e.prev=37,!x){e.next=40;break}throw y;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return window.DownloadFile=function(e){return d(n,e)},window.DownloadSaves=function(){return f(n)},e.abrupt("return",{files:o,update:function(e,t){return n.set(e,t)},delete:function(e){return n.remove(e)},clear:function(){return n.clear()},download:function(e){return d(n,e)},upload:function(e){return w(n,o,e)}});case 47:return e.prev=47,e.t3=e.catch(0),window.DownloadFile=function(){return console.error("IndexedDB is not supported")},window.DownloadSaves=function(){return console.error("IndexedDB is not supported")},e.abrupt("return",{files:new Map,update:function(){return Promise.resolve()},delete:function(){return Promise.resolve()},clear:function(){return Promise.resolve()},download:function(){return Promise.resolve()},upload:function(){return Promise.resolve()}});case 52:case"end":return e.stop()}},e,null,[[0,47],[26,30,34,42],[35,,37,41]])}))).apply(this,arguments)}},63:function(e,t,n){"use strict";n.r(t);var r=n(11),o=Object(r.a)();window.addEventListener("message",function(e){var t=e.data,n=e.source;"transfer"===t.method?o.then(function(e){var t=e.files;n.postMessage({method:"storage",files:t},"*")}):"clear"===t.method&&o.then(function(e){return(0,e.clear)()})})}},[[63,3,0]]]);
//# sourceMappingURL=storage.89e2ac50.chunk.js.map